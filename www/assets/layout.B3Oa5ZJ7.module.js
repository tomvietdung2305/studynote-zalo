const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ZaloApp.Dwyq-Vvf.module.js","./index.CZ1t0h9G.module.js","./index-BvsuoDdo.css"])))=>i.map(i=>d[i]);
var P=Object.defineProperty,B=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var E=(s,t,r)=>t in s?P(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,b=(s,t)=>{for(var r in t||(t={}))_.call(t,r)&&E(s,r,t[r]);if(N)for(var r of N(t))A.call(t,r)&&E(s,r,t[r]);return s},w=(s,t)=>B(s,R(t));var L=(s,t)=>{var r={};for(var a in s)_.call(s,a)&&t.indexOf(a)<0&&(r[a]=s[a]);if(s!=null&&N)for(var a of N(s))t.indexOf(a)<0&&A.call(s,a)&&(r[a]=s[a]);return r};var c=(s,t,r)=>new Promise((a,n)=>{var o=x=>{try{u(r.next(x))}catch(d){n(d)}},i=x=>{try{u(r.throw(x))}catch(d){n(d)}},u=x=>x.done?a(x.value):Promise.resolve(x.value).then(o,i);u((r=r.apply(s,t)).next())});import{r as h,R as z,_ as H}from"./index.CZ1t0h9G.module.js";var O={exports:{}},S={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V=h,G=Symbol.for("react.element"),I=Symbol.for("react.fragment"),D=Object.prototype.hasOwnProperty,J=V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Z={key:!0,ref:!0,__self:!0,__source:!0};function T(s,t,r){var a,n={},o=null,i=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(a in t)D.call(t,a)&&!Z.hasOwnProperty(a)&&(n[a]=t[a]);if(s&&s.defaultProps)for(a in t=s.defaultProps,t)n[a]===void 0&&(n[a]=t[a]);return{$$typeof:G,type:s,key:o,ref:i,props:n,_owner:J.current}}S.Fragment=I;S.jsx=T;S.jsxs=T;O.exports=S;var e=O.exports;const U=()=>typeof window=="undefined"?!1:new URLSearchParams(window.location.search).get("mode")==="mobile",$=()=>typeof window=="undefined"?!1:window.ZaloJavaScriptInterface!==void 0||window.ZaloPayWebInterface!==void 0||/zalo/i.test(navigator.userAgent),K=()=>$()?"zalo":"web",ue=()=>U()?!1:K()==="web",q=()=>{if(typeof window=="undefined")return!1;const s=navigator.userAgent.toLowerCase();return["android","iphone","ipad","ipod","mobile","tablet"].some(r=>s.includes(r))},Q=()=>typeof window=="undefined"?!1:window.innerWidth<=768,Y=()=>$()?!1:q()||Q(),X=()=>$()?"zalo":Y()?"mobile-landing":"web",ee=()=>{const s=()=>{const t="https://zalo.me/s/2209613120590551014/";window.location.href=t};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl p-8 text-center",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"w-24 h-24 bg-blue-100 rounded-full mx-auto flex items-center justify-center",children:e.jsx("span",{className:"text-5xl",children:"ðŸ“š"})})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"StudyNote"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"á»¨ng dá»¥ng quáº£n lÃ½ há»c sinh dÃ nh cho giÃ¡o viÃªn"}),e.jsxs("div",{className:"mb-8 text-left",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("span",{className:"text-2xl",children:"âœ…"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Äiá»ƒm danh nhanh"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Theo dÃµi sÄ© sá»‘ hÃ ng ngÃ y"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ“"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Nháº­n xÃ©t AI"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Táº¡o nháº­n xÃ©t tá»± Ä‘á»™ng"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Káº¿t ná»‘i phá»¥ huynh"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Gá»­i thÃ´ng bÃ¡o trá»±c tiáº¿p"})]})]})]}),e.jsxs("button",{onClick:s,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-6 rounded-xl transition-colors mb-4 flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"ðŸ“±"}),"Má»Ÿ trong Zalo Mini App"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["á»¨ng dá»¥ng Ä‘Æ°á»£c thiáº¿t káº¿ cho Zalo Mini App.",e.jsx("br",{}),"Vui lÃ²ng má»Ÿ trÃªn Ä‘iá»‡n thoáº¡i Ä‘á»ƒ tráº£i nghiá»‡m Ä‘áº§y Ä‘á»§."]}),e.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"ðŸ’» Äang dÃ¹ng mÃ¡y tÃ­nh?"}),e.jsx("a",{href:"/",className:"text-blue-600 hover:text-blue-700 font-medium underline",onClick:t=>{t.preventDefault(),sessionStorage.setItem("force-web","true"),window.location.reload()},children:"Truy cáº­p phiÃªn báº£n Web"})]})]})})},se=[{id:"dashboard",label:"Dashboard",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{id:"classes",label:"Classes",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})},{id:"students",label:"Students",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})},{id:"attendance",label:"Attendance",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})},{id:"grades",label:"Grades",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})},{id:"reports",label:"AI Reports",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{id:"parent-connection",label:"Parent Connection",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}],te=({currentPage:s,onNavigate:t,isOpen:r})=>e.jsx("aside",{className:`fixed left-0 top-16 bottom-0 w-64 bg-white border-r border-gray-200 transition-transform duration-300 z-30 ${r?"translate-x-0":"-translate-x-full"}`,children:e.jsx("nav",{className:"p-4 space-y-1",children:se.map(a=>e.jsxs("button",{onClick:()=>t(a.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-all ${s===a.id?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}`,children:[a.icon,e.jsx("span",{children:a.label}),s===a.id&&e.jsx("div",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-blue-600"})]},a.id))})}),re=({onMenuClick:s,sidebarOpen:t})=>e.jsx("nav",{className:"fixed top-0 left-0 right-0 h-16 bg-white border-b border-gray-200 z-40 shadow-sm",children:e.jsxs("div",{className:"h-full px-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:s,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"Toggle menu",children:e.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:t?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ“š"}),e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"StudyNote"}),e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:"Web"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})}),e.jsxs("div",{className:"flex items-center gap-3 pl-3 border-l border-gray-200",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Teacher"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Demo Account"})]}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold",children:"T"})]})]})]})}),ae=({children:s,currentPage:t,onNavigate:r})=>{const[a,n]=h.useState(!0);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(re,{onMenuClick:()=>n(!a),sidebarOpen:a}),e.jsxs("div",{className:"flex",children:[e.jsx(te,{currentPage:t,onNavigate:r,isOpen:a}),e.jsx("main",{className:`flex-1 transition-all duration-300 ${a?"ml-64":"ml-0"} mt-16 p-8`,children:e.jsx("div",{className:"max-w-7xl mx-auto",children:s})})]})]})},y=u=>{var x=u,{title:s,subtitle:t,action:r,padding:a="md",children:n,className:o=""}=x,i=L(x,["title","subtitle","action","padding","children","className"]);const d={none:"",sm:"p-4",md:"p-6",lg:"p-8"};return e.jsxs("div",w(b({className:`bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow duration-200 ${o}`},i),{children:[(s||t||r)&&e.jsxs("div",{className:`flex items-start justify-between ${a!=="none"?"border-b border-gray-100 pb-4":""} ${d[a]}`,children:[e.jsxs("div",{className:"flex-1",children:[s&&e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s}),t&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t})]}),r&&e.jsx("div",{className:"ml-4",children:r})]}),e.jsx("div",{className:a!=="none"&&(s||t||r)?d[a]+" pt-4":d[a],children:n})]}))},g=x=>{var d=x,{variant:s="primary",size:t="md",loading:r=!1,icon:a,children:n,className:o="",disabled:i}=d,u=L(d,["variant","size","loading","icon","children","className","disabled"]);const l="font-medium rounded-lg transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",f={primary:"bg-blue-600 hover:bg-blue-700 active:bg-blue-800 text-white shadow-sm hover:shadow-md",secondary:"bg-white hover:bg-gray-50 active:bg-gray-100 text-gray-700 border border-gray-300 shadow-sm",danger:"bg-red-600 hover:bg-red-700 active:bg-red-800 text-white shadow-sm hover:shadow-md",ghost:"bg-transparent hover:bg-gray-100 active:bg-gray-200 text-gray-700"},v={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return e.jsx("button",w(b({className:`${l} ${f[s]} ${v[t]} ${o}`,disabled:i||r},u),{children:r?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):e.jsxs(e.Fragment,{children:[a,n]})}))},m="https://studynote-server-9zf2jvc33-justtoms-projects.vercel.app/api",p=()=>({"Content-Type":"application/json",Authorization:"Bearer offline_dev_token"}),j={getClasses(){return c(this,null,function*(){const s=yield fetch(`${m}/classes`,{headers:p()});if(!s.ok)throw new Error("Failed to fetch classes");return s.json()})},createClass(s){return c(this,null,function*(){const t=yield fetch(`${m}/classes`,{method:"POST",headers:p(),body:JSON.stringify(s)});if(!t.ok)throw new Error("Failed to create class");return t.json()})},updateClass(s,t){return c(this,null,function*(){const r=yield fetch(`${m}/classes/${s}`,{method:"PUT",headers:p(),body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to update class");return r.json()})},deleteClass(s){return c(this,null,function*(){const t=yield fetch(`${m}/classes/${s}`,{method:"DELETE",headers:p()});if(!t.ok)throw new Error("Failed to delete class");return t.json()})},getClassStudents(s){return c(this,null,function*(){const t=yield fetch(`${m}/classes/${s}/students`,{headers:p()});if(!t.ok)throw new Error("Failed to fetch students");return t.json()})},getAttendance(s,t){return c(this,null,function*(){const r=yield fetch(`${m}/attendance?classId=${s}&date=${t}`,{headers:p()});if(!r.ok)throw new Error("Failed to fetch attendance");return r.json()})},saveAttendance(s,t,r){return c(this,null,function*(){const a=yield fetch(`${m}/attendance`,{method:"POST",headers:p(),body:JSON.stringify({classId:s,date:t,attendance:r})});if(!a.ok)throw new Error("Failed to save attendance");return a.json()})},getAttendanceHistory(s){return c(this,null,function*(){const t=yield fetch(`${m}/attendance/history/${s}`,{headers:p()});if(!t.ok)throw new Error("Failed to fetch attendance history");return t.json()})},sendNotification(s){return c(this,null,function*(){const t=yield fetch(`${m}/notifications/send`,{method:"POST",headers:w(b({},p()),{"Content-Type":"application/json"}),body:JSON.stringify(s)});if(!t.ok){const r=yield t.json();throw new Error(r.error||"Failed to send notification")}return t.json()})},generateCodes(s){return c(this,null,function*(){const t=yield fetch(`${m}/classes/${s}/generate-codes`,{method:"POST",headers:p()});if(!t.ok)throw new Error("Failed to generate codes");return t.json()})},connectParent(s){return c(this,null,function*(){const t=yield fetch(`${m}/parents/connect`,{method:"POST",headers:w(b({},p()),{"Content-Type":"application/json"}),body:JSON.stringify({code:s})});if(!t.ok){const r=yield t.json();throw new Error(r.error||"Failed to connect")}return t.json()})},getChildren(){return c(this,null,function*(){const s=yield fetch(`${m}/parents/children`,{headers:p()});if(!s.ok)throw new Error("Failed to fetch children");return s.json()})},getGrades(s){return c(this,null,function*(){const t=yield fetch(`${m}/grades?classId=${s}`,{headers:p()});if(!t.ok)throw new Error("Failed to fetch grades");return t.json()})},saveGrade(s,t,r,a){return c(this,null,function*(){const n=yield fetch(`${m}/grades`,{method:"POST",headers:p(),body:JSON.stringify({classId:s,studentId:t,score:r,comment:a})});if(!n.ok)throw new Error("Failed to save grade");return n.json()})},generateReport(s){return c(this,null,function*(){const t=yield fetch(`${m}/reports/generate`,{method:"POST",headers:p(),body:JSON.stringify(s)});if(!t.ok)throw new Error("Failed to generate report");return t.json()})},getStudentReports(s,t=10){return c(this,null,function*(){const r=yield fetch(`${m}/reports/student/${s}?limit=${t}`,{headers:p()});if(!r.ok)throw new Error("Failed to get reports");return r.json()})},getReportById(s){return c(this,null,function*(){const t=yield fetch(`${m}/reports/${s}`,{headers:p()});if(!t.ok)throw new Error("Failed to get report");return t.json()})},sendReportToParent(s){return c(this,null,function*(){const t=yield fetch(`${m}/reports/${s}/send`,{method:"POST",headers:p(),body:JSON.stringify({})});if(!t.ok)throw new Error("Failed to send report");return t.json()})},updateReport(s,t){return c(this,null,function*(){const r=yield fetch(`${m}/reports/${s}`,{method:"PUT",headers:p(),body:JSON.stringify(t)});if(!r.ok)throw new Error("Failed to update report");return r.json()})},getStudentById(s){return c(this,null,function*(){const t=yield fetch(`${m}/students/${s}`,{headers:p()});if(!t.ok)throw new Error("Failed to get student");return t.json()})}},me=Object.freeze(Object.defineProperty({__proto__:null,apiService:j},Symbol.toStringTag,{value:"Module"}));function M(){const[s,t]=h.useState([]),[r,a]=h.useState(!0),[n,o]=h.useState(null),i=()=>c(this,null,function*(){try{a(!0);const l=yield j.getClasses();t(l.classes),o(null)}catch(l){console.error("Failed to fetch classes:",l),o("KhÃ´ng thá»ƒ táº£i danh sÃ¡ch lá»›p")}finally{a(!1)}});return h.useEffect(()=>{i()},[]),{classes:s,loading:r,error:n,fetchClasses:i,createClass:l=>c(this,null,function*(){try{return yield j.createClass(l),yield i(),{success:!0}}catch(f){throw console.error("Failed to create class:",f),f}}),updateClass:(l,f)=>c(this,null,function*(){try{return yield j.updateClass(l,f),yield i(),{success:!0}}catch(v){throw console.error("Failed to update class:",v),v}}),deleteClass:l=>c(this,null,function*(){try{return yield j.deleteClass(l),yield i(),{success:!0}}catch(f){throw console.error("Failed to delete class:",f),f}})}}function pe(s){const[t,r]=h.useState([]),[a,n]=h.useState(!0);return h.useEffect(()=>{c(this,null,function*(){if(!s){r([]),n(!1);return}try{n(!0);const i=yield j.getClassStudents(s);r(i.students||[])}catch(i){console.error("Failed to fetch students:",i),r([])}finally{n(!1)}})},[s]),{students:t,loading:a}}function ge(s,t){const[r,a]=h.useState({}),[n,o]=h.useState(!0),i=()=>c(this,null,function*(){if(!(!s||!t))try{o(!0);const d=yield j.getAttendance(s,t);a(d.attendance||{})}catch(d){console.error("Failed to fetch attendance:",d),a({})}finally{o(!1)}});return h.useEffect(()=>{i()},[s,t]),{attendance:r,loading:n,saveAttendance:d=>c(this,null,function*(){try{return yield j.saveAttendance(s,t,d),{success:!0}}catch(l){throw console.error("Failed to save attendance:",l),l}}),toggleStudent:d=>{a(l=>w(b({},l),{[d]:l[d]==="absent"?"present":"absent"}))}}}function fe(s){const[t,r]=h.useState([]),[a,n]=h.useState(!0);return h.useEffect(()=>{c(this,null,function*(){if(s)try{n(!0);const i=yield j.getAttendanceHistory(s);r(i.history||[])}catch(i){console.error("Failed to fetch history:",i)}finally{n(!1)}})},[s]),{history:t,loading:a}}function je(s){const[t,r]=h.useState([]),[a,n]=h.useState(!0),o=()=>c(this,null,function*(){if(s)try{n(!0);const u=yield j.getGrades(s);r(u.grades||[])}catch(u){console.error("Failed to fetch grades:",u)}finally{n(!1)}});return h.useEffect(()=>{o()},[s]),{grades:t,loading:a,saveGrade:(u,x,d)=>c(this,null,function*(){try{return yield j.saveGrade(s,u,x,d),yield o(),{success:!0}}catch(l){throw console.error("Failed to save grade:",l),l}})}}const k=({title:s,value:t,icon:r,color:a,onClick:n})=>e.jsx(y,{className:`cursor-${n?"pointer hover:scale-105":"default"} transition-transform`,onClick:n,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:s}),e.jsx("p",{className:`text-3xl font-bold ${a}`,children:t})]}),e.jsx("div",{className:`p-3 rounded-xl ${a.replace("text","bg").replace("600","100")}`,children:r})]})}),F=({onNavigate:s})=>{const{classes:t,loading:r}=M(),a=t.reduce((n,o)=>n+(o.total_students||0),0);return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Welcome back! Here's your overview."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(k,{title:"Total Classes",value:r?"...":t.length,color:"text-blue-600",onClick:()=>s("classes"),icon:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsx(k,{title:"Total Students",value:r?"...":a,color:"text-green-600",onClick:()=>s("students"),icon:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),e.jsx(k,{title:"Attendance Rate",value:"--",color:"text-purple-600",onClick:()=>s("attendance"),icon:e.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx(k,{title:"AI Reports",value:"--",color:"text-orange-600",onClick:()=>s("reports"),icon:e.jsx("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsx(y,{title:"Recent Classes",children:r?e.jsx("p",{className:"text-gray-500",children:"Loading..."}):t.length>0?e.jsx("div",{className:"space-y-3",children:t.slice(0,3).map(n=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",onClick:()=>s("classes"),children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:n.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[n.total_students||0," students"]})]}),e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},n.id))}):e.jsx("p",{className:"text-gray-500",children:"No classes yet"})}),e.jsx(y,{title:"Quick Actions",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(g,{variant:"primary",onClick:()=>s("attendance"),children:"ðŸ“ Quick Attendance"}),e.jsx(g,{variant:"secondary",onClick:()=>s("classes"),children:"âž• Add Class"}),e.jsx(g,{variant:"secondary",onClick:()=>s("grades"),children:"âœï¸ Input Grades"}),e.jsx(g,{variant:"secondary",onClick:()=>s("reports"),children:"ðŸ¤– Generate Report"})]})})]}),e.jsx(y,{padding:"lg",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"text-5xl",children:"ðŸ‘‹"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Welcome to StudyNote Web!"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This is the desktop version of StudyNote. You can manage classes, students, attendance, and generate AI-powered reports. For mobile access, please use the Zalo Mini App."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(g,{variant:"primary",size:"sm",onClick:()=>s("classes"),children:"Get Started"}),e.jsx(g,{variant:"ghost",size:"sm",children:"Learn More"})]})]})]})})]})};function ne({data:s,columns:t,onRowClick:r,loading:a=!1,emptyMessage:n="No data available"}){return a?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):s.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:e.jsx("p",{children:n})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:t.map((o,i)=>e.jsx("th",{scope:"col",className:`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ${o.width||""}`,children:o.header},i))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(o=>e.jsx("tr",{onClick:()=>r==null?void 0:r(o),className:`${r?"cursor-pointer hover:bg-gray-50":""} transition-colors`,children:t.map((i,u)=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.render?i.render(o):String(o[i.key]||"-")},u))},o.id))})]})})}const oe=({isOpen:s,onClose:t,title:r,children:a,footer:n,size:o="md"})=>{const i=h.useRef(null);if(h.useEffect(()=>{const x=d=>{d.key==="Escape"&&t()};return s&&(document.addEventListener("keydown",x),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",x),document.body.style.overflow="unset"}},[s,t]),!s)return null;const u={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50 backdrop-blur-sm animate-fadeIn",children:e.jsxs("div",{ref:i,className:`bg-white rounded-2xl shadow-2xl w-full ${u[o]} max-h-[90vh] overflow-hidden flex flex-col animate-scaleIn`,onClick:x=>x.stopPropagation(),children:[r&&e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors p-1 rounded-lg hover:bg-gray-100",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"px-6 py-4 overflow-y-auto flex-1",children:a}),n&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 flex items-center justify-end gap-3",children:n})]})})},le=()=>{const{classes:s,loading:t,createClass:r}=M(),[a,n]=h.useState(!1),[o,i]=h.useState(""),[u,x]=h.useState(!1),d=()=>c(void 0,null,function*(){if(o.trim()){x(!0);try{yield r({name:o,schedules:[],students:[]}),i(""),n(!1)}catch(l){console.error("Failed to create class:",l)}finally{x(!1)}}});return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Classes"}),e.jsx("p",{className:"text-gray-600",children:"Manage your classes and schedules"})]}),e.jsx(g,{variant:"primary",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),onClick:()=>n(!0),children:"Add Class"})]}),e.jsx(y,{children:e.jsx(ne,{data:s,loading:t,emptyMessage:"No classes yet. Create one to get started!",columns:[{header:"Class Name",key:"name",render:l=>e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:l.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",l.id]})]})},{header:"Students",key:"total_students",render:l=>e.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:[l.total_students||0," students"]})},{header:"Schedule",key:"schedules",render:l=>{var f;return e.jsxs("span",{className:"text-sm text-gray-600",children:[((f=l.schedules)==null?void 0:f.length)||0," sessions"]})}},{header:"Created",key:"created_at",render:l=>e.jsx("span",{className:"text-sm text-gray-600",children:l.created_at?new Date(l.created_at).toLocaleDateString():"-"})},{header:"Actions",key:"id",render:l=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{size:"sm",variant:"ghost",children:"View"}),e.jsx(g,{size:"sm",variant:"ghost",children:"Edit"})]})}]})}),e.jsx(oe,{isOpen:a,onClose:()=>n(!1),title:"Create New Class",footer:e.jsxs(e.Fragment,{children:[e.jsx(g,{variant:"secondary",onClick:()=>n(!1),children:"Cancel"}),e.jsx(g,{variant:"primary",onClick:d,loading:u,disabled:!o.trim(),children:"Create Class"})]}),children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class Name"}),e.jsx("input",{type:"text",value:o,onChange:l=>i(l.target.value),placeholder:"e.g., Piano K12",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyPress:l=>l.key==="Enter"&&d()})]})})})]})},ie=()=>{const{classes:s,loading:t}=M(),r=s.flatMap(a=>Array(a.total_students||0).fill(null).map((n,o)=>({id:`${a.id}-${o}`,name:`Student ${o+1}`,class:a.name,classId:a.id})));return e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Students"}),e.jsx("p",{className:"text-gray-600",children:"View and manage all students"})]})}),t?e.jsx(y,{children:e.jsx("div",{className:"text-center py-12",children:"Loading students..."})}):r.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(a=>e.jsx(y,{padding:"md",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-lg flex-shrink-0",children:a.name[0]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 truncate",children:a.name}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:a.class}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsx(g,{size:"sm",variant:"ghost",children:"View"}),e.jsx(g,{size:"sm",variant:"ghost",children:"Report"})]})]})]})},a.id))}):e.jsx(y,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-5xl mb-4",children:"ðŸ‘¥"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No students yet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Students will appear here when you add them to your classes"})]})})]})},W=()=>{const[s,t]=h.useState("dashboard"),r=()=>{switch(s){case"dashboard":return e.jsx(F,{onNavigate:t});case"classes":return e.jsx(le,{});case"students":return e.jsx(ie,{});case"attendance":return e.jsx(C,{title:"Attendance"});case"grades":return e.jsx(C,{title:"Grades"});case"reports":return e.jsx(C,{title:"AI Reports"});case"parent-connection":return e.jsx(C,{title:"Parent Connection"});default:return e.jsx(F,{onNavigate:t})}};return e.jsx(ae,{currentPage:s,onNavigate:t,children:r()})},C=({title:s})=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸš§"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:s}),e.jsx("p",{className:"text-gray-600",children:"This feature is coming soon!"})]}),ce=z.lazy(()=>H(()=>import("./ZaloApp.Dwyq-Vvf.module.js").then(s=>s.Z),__vite__mapDeps([0,1,2]),import.meta.url)),de=()=>{const s=X(),t=typeof window!="undefined"&&sessionStorage.getItem("force-web")==="true";return console.log("[Layout] Routing strategy:",s,t?"(forced web)":""),t&&s==="mobile-landing"?e.jsx(W,{}):s==="mobile-landing"?e.jsx(ee,{}):s==="zalo"?e.jsx(z.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:"Loading..."}),children:e.jsx(ce,{})}):e.jsx(W,{})},ye=Object.freeze(Object.defineProperty({__proto__:null,default:de},Symbol.toStringTag,{value:"Module"}));export{j as a,pe as b,ge as c,je as d,fe as e,me as f,K as g,ue as i,e as j,ye as l,M as u};
